<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BookhospTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">BookhospTest Coverage Results</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">BookhospTest.java</span></div><h1>BookhospTest.java</h1><pre class="source lang-java linenums">import org.json.JSONArray;
import org.json.JSONObject;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.PrintStream;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.time.LocalDate;

import static org.junit.jupiter.api.Assertions.*;

<span class="fc" id="L17">class BookhospTest {</span>

    private static final String TEMP_PATIENTS_FILE = &quot;test_patients.json&quot;;
    private static final String TEMP_DOCTORS_FILE = &quot;test_doctors.json&quot;;
    private static final String TEMP_INPUT_DOCTOR_FILE = &quot;test_input_doctor.json&quot;;
    private static final String TEMP_INPUT_PATIENT_FILE = &quot;test_input_patient.json&quot;;
    private static final String TEMP_PATIENTS_OVERDUES_FAIL_FILE = &quot;test_overdues_fail_patients.json&quot;;

<span class="fc" id="L25">    private final ByteArrayOutputStream outputStreamCaptor = new ByteArrayOutputStream();</span>
    private PrintStream originalOut;

    @BeforeEach
    void setUp() throws IOException {
        //Normal Case
<span class="fc" id="L31">        JSONArray patient1Appointments = new JSONArray();</span>
<span class="fc" id="L32">        patient1Appointments.put(new JSONObject()</span>
<span class="fc" id="L33">                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L34">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L35">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L36">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L37">                .put(&quot;time&quot;, &quot;10:30&quot;)</span>
<span class="fc" id="L38">                .put(&quot;status&quot;, &quot;Scheduled&quot;)</span>
<span class="fc" id="L39">                .put(&quot;notes&quot;, &quot;Routine check-up.&quot;));</span>
<span class="fc" id="L40">        patient1Appointments.put(new JSONObject()</span>
<span class="fc" id="L41">                .put(&quot;appointment_id&quot;, &quot;A002&quot;)</span>
<span class="fc" id="L42">                .put(&quot;department&quot;, &quot;SURGERY&quot;)</span>
<span class="fc" id="L43">                .put(&quot;doctor_id&quot;, &quot;D003&quot;)</span>
<span class="fc" id="L44">                .put(&quot;date&quot;, &quot;2024-11-30&quot;)</span>
<span class="fc" id="L45">                .put(&quot;time&quot;, &quot;13:00&quot;)</span>
<span class="fc" id="L46">                .put(&quot;status&quot;, &quot;Cancelled&quot;)</span>
<span class="fc" id="L47">                .put(&quot;notes&quot;, &quot;Patient requested reschedule.&quot;));</span>
<span class="fc" id="L48">        JSONArray patients = new JSONArray();</span>
<span class="fc" id="L49">        patients.put(new JSONObject()</span>
<span class="fc" id="L50">                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L51">                .put(&quot;name&quot;, &quot;Patient 1&quot;)</span>
<span class="fc" id="L52">                .put(&quot;age&quot;, 35)</span>
<span class="fc" id="L53">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L54">                .put(&quot;date_of_birth&quot;, &quot;15/01/1998&quot;)</span>
<span class="fc" id="L55">                .put(&quot;appointments&quot;, patient1Appointments));</span>
<span class="fc" id="L56">        patients.put(new JSONObject()</span>
<span class="fc" id="L57">                .put(&quot;patient_id&quot;, &quot;P002&quot;)</span>
<span class="fc" id="L58">                .put(&quot;name&quot;, &quot;Patient 2&quot;)</span>
<span class="fc" id="L59">                .put(&quot;age&quot;, 57)</span>
<span class="fc" id="L60">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L61">                .put(&quot;date_of_birth&quot;, &quot;15/05/1968&quot;)</span>
<span class="fc" id="L62">                .put(&quot;appointments&quot;, new JSONArray()));</span>

<span class="fc" id="L64">        JSONArray doctors = new JSONArray();</span>

<span class="fc" id="L66">        JSONArray doctor1Schedule = new JSONArray();</span>
<span class="fc" id="L67">        doctor1Schedule.put(new JSONObject()</span>
<span class="fc" id="L68">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L69">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L70">                        .put(new JSONObject()</span>
<span class="fc" id="L71">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L72">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L73">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L74">                        .put(new JSONObject()</span>
<span class="fc" id="L75">                                .put(&quot;appointment_id&quot;, &quot;A003&quot;)</span>
<span class="fc" id="L76">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L77">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L78">                        .put(new JSONObject()</span>
<span class="fc" id="L79">                                .put(&quot;appointment_id&quot;, &quot;A005&quot;)</span>
<span class="fc" id="L80">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L81">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L82">                        .put(new JSONObject()</span>
<span class="fc" id="L83">                                .put(&quot;appointment_id&quot;, &quot;A006&quot;)</span>
<span class="fc" id="L84">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L85">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L86">                        .put(new JSONObject()</span>
<span class="fc" id="L87">                                .put(&quot;appointment_id&quot;, &quot;A007&quot;)</span>
<span class="fc" id="L88">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L89">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L90">                        .put(new JSONObject()</span>
<span class="fc" id="L91">                                .put(&quot;appointment_id&quot;, &quot;A008&quot;)</span>
<span class="fc" id="L92">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L93">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L94">                        .put(new JSONObject()</span>
<span class="fc" id="L95">                                .put(&quot;appointment_id&quot;, &quot;A009&quot;)</span>
<span class="fc" id="L96">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L97">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L98">                        .put(new JSONObject()</span>
<span class="fc" id="L99">                                .put(&quot;appointment_id&quot;, &quot;A002&quot;)</span>
<span class="fc" id="L100">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L101">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L102">                        .put(new JSONObject()</span>
<span class="fc" id="L103">                                .put(&quot;appointment_id&quot;, &quot;A020&quot;)</span>
<span class="fc" id="L104">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L105">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L106">                        .put(new JSONObject()</span>
<span class="fc" id="L107">                                .put(&quot;appointment_id&quot;, &quot;A021&quot;)</span>
<span class="fc" id="L108">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L109">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L110">                        .put(new JSONObject()</span>
<span class="fc" id="L111">                                .put(&quot;appointment_id&quot;, &quot;A031&quot;)</span>
<span class="fc" id="L112">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L113">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L116">        doctors.put(new JSONObject()</span>
<span class="fc" id="L117">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L118">                .put(&quot;name&quot;, &quot;Doctor 1&quot;)</span>
<span class="fc" id="L119">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L120">                .put(&quot;specialization&quot;, &quot;General Medicine&quot;)</span>
<span class="fc" id="L121">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L122">                .put(&quot;schedule&quot;, doctor1Schedule));</span>

<span class="fc" id="L124">        JSONArray doctor2Schedule = new JSONArray();</span>
<span class="fc" id="L125">        doctor2Schedule.put(new JSONObject()</span>
<span class="fc" id="L126">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L127">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L128">                        .put(new JSONObject()</span>
<span class="fc" id="L129">                                .put(&quot;appointment_id&quot;, &quot;A041&quot;)</span>
<span class="fc" id="L130">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L131">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L132">                        .put(new JSONObject()</span>
<span class="fc" id="L133">                                .put(&quot;appointment_id&quot;, &quot;A043&quot;)</span>
<span class="fc" id="L134">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L135">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L138">        doctors.put(new JSONObject()</span>
<span class="fc" id="L139">                .put(&quot;doctor_id&quot;, &quot;D002&quot;)</span>
<span class="fc" id="L140">                .put(&quot;name&quot;, &quot;Doctor 2&quot;)</span>
<span class="fc" id="L141">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L142">                .put(&quot;specialization&quot;, &quot;Pediatrics&quot;)</span>
<span class="fc" id="L143">                .put(&quot;department&quot;, &quot;PEDIATRICS&quot;)</span>
<span class="fc" id="L144">                .put(&quot;schedule&quot;, doctor2Schedule));</span>

<span class="fc" id="L146">        JSONArray doctor3Schedule = new JSONArray();</span>

<span class="fc" id="L148">        doctor3Schedule.put(new JSONObject()</span>
<span class="fc" id="L149">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L150">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L151">                        .put(new JSONObject()</span>
<span class="fc" id="L152">                                .put(&quot;appointment_id&quot;, &quot;A021&quot;)</span>
<span class="fc" id="L153">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L154">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L155">                        .put(new JSONObject()</span>
<span class="fc" id="L156">                                .put(&quot;appointment_id&quot;, &quot;A033&quot;)</span>
<span class="fc" id="L157">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L158">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L161">        doctors.put(new JSONObject()</span>
<span class="fc" id="L162">                .put(&quot;doctor_id&quot;, &quot;D003&quot;)</span>
<span class="fc" id="L163">                .put(&quot;name&quot;, &quot;Doctor 3&quot;)</span>
<span class="fc" id="L164">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L165">                .put(&quot;specialization&quot;, &quot;Surgery&quot;)</span>
<span class="fc" id="L166">                .put(&quot;department&quot;, &quot;SURGERY&quot;)</span>
<span class="fc" id="L167">                .put(&quot;schedule&quot;, doctor3Schedule));</span>
<span class="fc" id="L168">        JSONObject inputDoctor = new JSONObject()</span>
<span class="fc" id="L169">                .put(&quot;doctor_id&quot;, &quot;&quot;)</span>
<span class="fc" id="L170">                .put(&quot;name&quot;, &quot;&quot;)</span>
<span class="fc" id="L171">                .put(&quot;gender&quot;, &quot;&quot;)</span>
<span class="fc" id="L172">                .put(&quot;specialization&quot;, &quot;&quot;)</span>
<span class="fc" id="L173">                .put(&quot;department&quot;, &quot;&quot;)</span>
<span class="fc" id="L174">                .put(&quot;schedule&quot;, new JSONArray());</span>
<span class="fc" id="L175">        JSONObject inputPatient = new JSONObject()</span>
<span class="fc" id="L176">                .put(&quot;patient_id&quot;, &quot;&quot;)</span>
<span class="fc" id="L177">                .put(&quot;name&quot;, &quot;&quot;)</span>
<span class="fc" id="L178">                .put(&quot;age&quot;, 0)</span>
<span class="fc" id="L179">                .put(&quot;gender&quot;, &quot;&quot;)</span>
<span class="fc" id="L180">                .put(&quot;date_of_birth&quot;, &quot;&quot;)</span>
<span class="fc" id="L181">                .put(&quot;appointments&quot;, new JSONArray());</span>

        //Sample to prove fail overdue
<span class="fc" id="L184">        JSONArray patient1OverAppointments = new JSONArray();</span>
<span class="fc" id="L185">        patient1OverAppointments.put(new JSONObject()</span>
<span class="fc" id="L186">                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L187">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L188">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L189">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L190">                .put(&quot;time&quot;, &quot;10:30&quot;)</span>
<span class="fc" id="L191">                .put(&quot;status&quot;, &quot;Cancelled&quot;)</span>
<span class="fc" id="L192">                .put(&quot;notes&quot;, &quot;Routine check-up.&quot;));</span>
<span class="fc" id="L193">        JSONArray patientsOver = new JSONArray();</span>
<span class="fc" id="L194">        patients.put(new JSONObject()</span>
<span class="fc" id="L195">                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L196">                .put(&quot;name&quot;, &quot;Patient 1&quot;)</span>
<span class="fc" id="L197">                .put(&quot;age&quot;, 35)</span>
<span class="fc" id="L198">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L199">                .put(&quot;date_of_birth&quot;, &quot;15/01/1998&quot;)</span>
<span class="fc" id="L200">                .put(&quot;appointments&quot;, patient1OverAppointments));</span>

<span class="fc" id="L202">        Files.write(Paths.get(TEMP_PATIENTS_FILE), patients.toString().getBytes());</span>
<span class="fc" id="L203">        Files.write(Paths.get(TEMP_DOCTORS_FILE), doctors.toString().getBytes());</span>
<span class="fc" id="L204">        Files.write(Paths.get(TEMP_INPUT_DOCTOR_FILE), inputDoctor.toString().getBytes());</span>
<span class="fc" id="L205">        Files.write(Paths.get(TEMP_INPUT_PATIENT_FILE), inputPatient.toString().getBytes());</span>
<span class="fc" id="L206">        Files.write(Paths.get(TEMP_PATIENTS_OVERDUES_FAIL_FILE), patientsOver.toString().getBytes());</span>
<span class="fc" id="L207">        originalOut = System.out;</span>
<span class="fc" id="L208">        System.setOut(new PrintStream(outputStreamCaptor));</span>
<span class="fc" id="L209">    }</span>

    @AfterEach
    void cleanUp() {
<span class="fc" id="L213">        new File(TEMP_PATIENTS_FILE).delete();</span>
<span class="fc" id="L214">        new File(TEMP_DOCTORS_FILE).delete();</span>
<span class="fc" id="L215">        new File(TEMP_INPUT_DOCTOR_FILE).delete();</span>
<span class="fc" id="L216">        new File(TEMP_INPUT_PATIENT_FILE).delete();</span>
<span class="fc" id="L217">        new File(TEMP_PATIENTS_OVERDUES_FAIL_FILE).delete();</span>

<span class="fc" id="L219">        System.setOut(originalOut);</span>

<span class="fc" id="L221">        System.out.println(&quot;Test output was:\n&quot; + outputStreamCaptor);</span>
<span class="fc" id="L222">    }</span>

    //TC01
    @Test
    void testWhereCommandIsNotIntroduced() {
<span class="fc" id="L227">        String[] args = {};</span>
<span class="fc" id="L228">        Bookhosp.main(args);</span>
<span class="fc" id="L229">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L230">        assertTrue(consoleOutput.contains(&quot;Error: Insufficient arguments. Usage: Bookhosp &lt;command&gt; [options]&quot;));</span>
<span class="fc" id="L231">    }</span>

    //TC04
    @Test
    void testInvalidOption() {
<span class="fc" id="L236">        String[] args = {&quot;testing&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE};</span>
<span class="fc" id="L237">        Bookhosp.main(args);</span>
<span class="fc" id="L238">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L239">        assertTrue(consoleOutput.contains(&quot;Unknown command&quot;));</span>
<span class="fc" id="L240">    }</span>

    //TC05
    @Test
    void testHelpCommand() {
<span class="fc" id="L245">        String[] args = {&quot;help&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE};</span>
<span class="fc" id="L246">        Bookhosp.main(args);</span>
<span class="fc" id="L247">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L248">        assertTrue(consoleOutput.contains(&quot;Available commands&quot;), &quot;Help Message is not correct&quot;);</span>

<span class="fc" id="L250">    }</span>

    //TC75
    @Test
    void testHelpCommandWithLog() {
<span class="fc" id="L255">        String[] args = {&quot;help&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;--log&quot;};</span>
<span class="fc" id="L256">        Bookhosp.main(args);</span>
<span class="fc" id="L257">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L258">        assertTrue(consoleOutput.contains(&quot;Available commands&quot;), &quot;Help Message is not correct&quot;);</span>

<span class="fc" id="L260">    }</span>

    //TC76
    @Test
    void testNoLogPermissionWrite() {
<span class="fc" id="L265">        File logFile = new File(&quot;log.txt&quot;);</span>
        try {
<span class="pc bpc" id="L267" title="3 of 4 branches missed.">            if (logFile.exists() || logFile.createNewFile()) {</span>
<span class="fc" id="L268">                logFile.setReadOnly();</span>
            }
<span class="nc" id="L270">        } catch (IOException e) {</span>
<span class="nc" id="L271">            System.err.println(&quot;Failed to set up the test file.&quot;);</span>
<span class="nc" id="L272">            return;</span>
<span class="fc" id="L273">        }</span>

<span class="fc" id="L275">        String[] args = {&quot;help&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;--log&quot;};</span>
<span class="fc" id="L276">        Bookhosp.main(args);</span>
<span class="fc" id="L277">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L278">        logFile.setWritable(true);</span>
<span class="fc" id="L279">        assertTrue(consoleOutput.contains(&quot;Failed to write to log file.&quot;), &quot;Log write in log&quot;);</span>

<span class="fc" id="L281">    }</span>

    /* Booking Functionality*/
    //TC06
    @Test
    void testHandleBookingWithValidDataGeneral() {
<span class="fc" id="L287">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L288">        Bookhosp.main(args);</span>
<span class="fc" id="L289">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L290">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;), &quot;Schedule should not be empty after booking.&quot;);</span>
<span class="fc" id="L291">    }</span>

    //TC44
    @Test
    void testHandleBookingWithValidDataPediatrics() {
<span class="fc" id="L296">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;Pediatrics&quot;};</span>
<span class="fc" id="L297">        Bookhosp.main(args);</span>
<span class="fc" id="L298">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L299">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;), &quot;Schedule should not be empty after booking.&quot;);</span>
<span class="fc" id="L300">    }</span>

    //TC45
    @Test
    void testHandleBookingWithValidDataSurgery() {
<span class="fc" id="L305">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;SURGERY&quot;};</span>
<span class="fc" id="L306">        Bookhosp.main(args);</span>
<span class="fc" id="L307">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L308">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;), &quot;Schedule should not be empty after booking.&quot;);</span>
<span class="fc" id="L309">    }</span>

    //TC07
    @Test
    void testHandleBookingWithInvalidPatient() {
<span class="fc" id="L314">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P999&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L315">        Bookhosp.main(args);</span>
<span class="fc" id="L316">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L317">        assertTrue(consoleOutput.contains(&quot;Error: Patient ID not found&quot;), &quot;Patient ID should be not found&quot;);</span>
<span class="fc" id="L318">    }</span>

    //TC08
    @Test
    void testHandleBookingWithNotAllTheParams() {
<span class="fc" id="L323">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;};</span>
<span class="fc" id="L324">        Bookhosp.main(args);</span>
<span class="fc" id="L325">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L326">        assertTrue(consoleOutput.contains(&quot;Usage: book&quot;), &quot;Error message should be informed&quot;);</span>
<span class="fc" id="L327">    }</span>

    //TC47
    @Test
    void testErrorFileBooking() {
<span class="fc" id="L332">        String[] args = {&quot;book&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L333">        Bookhosp.main(args);</span>
<span class="fc" id="L334">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L335">        assertTrue(consoleOutput.contains(&quot;Error handling booking: &quot;));</span>
<span class="fc" id="L336">    }</span>

    //TC48
    @Test
    void testHandleBookingFailDepartment() {
<span class="fc" id="L341">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;&quot;};</span>
<span class="fc" id="L342">        Bookhosp.main(args);</span>
<span class="fc" id="L343">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L344">        assertTrue(consoleOutput.contains(&quot;Error: No available doctors in department &quot;));</span>
<span class="fc" id="L345">    }</span>

    //TC49
    @Test
    void testHandleBookingPatialOcuppiedSlots() throws IOException {
<span class="fc" id="L350">        JSONArray doctor1Schedule = new JSONArray();</span>
<span class="fc" id="L351">        doctor1Schedule.put(new JSONObject()</span>
<span class="fc" id="L352">                .put(&quot;date&quot;, &quot;2024-12-02&quot;)</span>
<span class="fc" id="L353">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L354">                        .put(new JSONObject()</span>
<span class="fc" id="L355">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L356">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L357">                                .put(&quot;time&quot;, &quot;9:00&quot;))</span>
<span class="fc" id="L358">                        .put(new JSONObject()</span>
<span class="fc" id="L359">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L360">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L361">                                .put(&quot;time&quot;, &quot;9:30&quot;))</span>
<span class="fc" id="L362">                        .put(new JSONObject()</span>
<span class="fc" id="L363">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L364">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L365">                                .put(&quot;time&quot;, &quot;10:00&quot;))</span>
                ));

<span class="fc" id="L368">        JSONArray doctors = new JSONArray();</span>
<span class="fc" id="L369">        doctors.put(new JSONObject()</span>
<span class="fc" id="L370">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L371">                .put(&quot;name&quot;, &quot;Doctor 1&quot;)</span>
<span class="fc" id="L372">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L373">                .put(&quot;specialization&quot;, &quot;General Medicine&quot;)</span>
<span class="fc" id="L374">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L375">                .put(&quot;schedule&quot;, doctor1Schedule));</span>
<span class="fc" id="L376">        Files.write(Paths.get(&quot;doctors_slots_complete.json&quot;), doctors.toString().getBytes());</span>
<span class="fc" id="L377">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, &quot;doctors_slots_complete.json&quot;, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L378">        Bookhosp.main(args);</span>
<span class="fc" id="L379">        new File(&quot;doctors_slots_complete.json&quot;).delete();</span>
<span class="fc" id="L380">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L381">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;));</span>
<span class="fc" id="L382">    }</span>

    //TC77
    @Test
    void testHandleBookingNoSlots() throws IOException {
<span class="fc" id="L387">        JSONArray doctor1Schedule = new JSONArray();</span>
<span class="fc" id="L388">        doctor1Schedule.put(new JSONObject()</span>
<span class="fc" id="L389">                .put(&quot;date&quot;, &quot;2024-12-02&quot;)</span>
<span class="fc" id="L390">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L391">                        .put(new JSONObject()</span>
<span class="fc" id="L392">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L393">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L394">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L395">                        .put(new JSONObject()</span>
<span class="fc" id="L396">                                .put(&quot;appointment_id&quot;, &quot;A003&quot;)</span>
<span class="fc" id="L397">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L398">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L399">                        .put(new JSONObject()</span>
<span class="fc" id="L400">                                .put(&quot;appointment_id&quot;, &quot;A005&quot;)</span>
<span class="fc" id="L401">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L402">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L403">                        .put(new JSONObject()</span>
<span class="fc" id="L404">                                .put(&quot;appointment_id&quot;, &quot;A006&quot;)</span>
<span class="fc" id="L405">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L406">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L407">                        .put(new JSONObject()</span>
<span class="fc" id="L408">                                .put(&quot;appointment_id&quot;, &quot;A007&quot;)</span>
<span class="fc" id="L409">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L410">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L411">                        .put(new JSONObject()</span>
<span class="fc" id="L412">                                .put(&quot;appointment_id&quot;, &quot;A008&quot;)</span>
<span class="fc" id="L413">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L414">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L415">                        .put(new JSONObject()</span>
<span class="fc" id="L416">                                .put(&quot;appointment_id&quot;, &quot;A009&quot;)</span>
<span class="fc" id="L417">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L418">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L419">                        .put(new JSONObject()</span>
<span class="fc" id="L420">                                .put(&quot;appointment_id&quot;, &quot;A002&quot;)</span>
<span class="fc" id="L421">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L422">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L423">                        .put(new JSONObject()</span>
<span class="fc" id="L424">                                .put(&quot;appointment_id&quot;, &quot;A020&quot;)</span>
<span class="fc" id="L425">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L426">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L427">                        .put(new JSONObject()</span>
<span class="fc" id="L428">                                .put(&quot;appointment_id&quot;, &quot;A021&quot;)</span>
<span class="fc" id="L429">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L430">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L431">                        .put(new JSONObject()</span>
<span class="fc" id="L432">                                .put(&quot;appointment_id&quot;, &quot;A031&quot;)</span>
<span class="fc" id="L433">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L434">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L437">        JSONArray doctors = new JSONArray();</span>
<span class="fc" id="L438">        doctors.put(new JSONObject()</span>
<span class="fc" id="L439">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L440">                .put(&quot;name&quot;, &quot;Doctor 1&quot;)</span>
<span class="fc" id="L441">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L442">                .put(&quot;specialization&quot;, &quot;General Medicine&quot;)</span>
<span class="fc" id="L443">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L444">                .put(&quot;schedule&quot;, doctor1Schedule));</span>
<span class="fc" id="L445">        Files.write(Paths.get(&quot;doctors_slots_complete.json&quot;), doctors.toString().getBytes());</span>
<span class="fc" id="L446">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, &quot;doctors_slots_complete.json&quot;, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L447">        Bookhosp.main(args);</span>
<span class="fc" id="L448">        new File(&quot;doctors_slots_complete.json&quot;).delete();</span>
<span class="fc" id="L449">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L450">        assertTrue(consoleOutput.contains(&quot;Error: No available slots on &quot;));</span>
<span class="fc" id="L451">    }</span>

    //TC78
    @Test
    void testBookingNextDaySaturday() {
<span class="fc" id="L456">        LocalDate nextWorkingDay = Bookhosp.getNextWorkingDay(LocalDate.of(2024, 11, 29));</span>
<span class="fc" id="L457">        assertEquals(LocalDate.of(2024, 12, 2), nextWorkingDay);</span>
<span class="fc" id="L458">    }</span>

    //TC79
    @Test
    void testBookingNextDaySunday() {
<span class="fc" id="L463">        LocalDate nextWorkingDay = Bookhosp.getNextWorkingDay(LocalDate.of(2024, 11, 30));</span>
<span class="fc" id="L464">        assertEquals(LocalDate.of(2024, 12, 2), nextWorkingDay);</span>
<span class="fc" id="L465">    }</span>


    /*Display Functionality*/
    //TC50
    @Test
    void testDisplayInValidCommandIntroduced() {
<span class="fc" id="L472">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE};</span>
<span class="fc" id="L473">        Bookhosp.main(args);</span>
<span class="fc" id="L474">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L475">        assertTrue(consoleOutput.contains(&quot;Usage: display &lt;doctor.json&gt; &lt;ALL|GENERAL|PEDIATRICS|SURGERY|DOCTOR &lt;Doctor_ID&gt;&gt; &lt;DATE&gt;&quot;));</span>
<span class="fc" id="L476">    }</span>

    //TC51
    @Test
    void testDisplayInValidDoctorCommandIntroduced() {
<span class="fc" id="L481">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L482">        Bookhosp.main(args);</span>
<span class="fc" id="L483">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L484">        assertTrue(consoleOutput.contains(&quot;Usage: display &lt;doctor.json&gt; DOCTOR &lt;Doctor_ID&gt; &lt;DATE&gt;&quot;));</span>
<span class="fc" id="L485">    }</span>

    //TC52
    @Test
    void testHandleDisplayDOCTOR() {
<span class="fc" id="L490">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;D001&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L491">        Bookhosp.main(args);</span>
<span class="fc" id="L492">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L493">        assertTrue(consoleOutput.contains(&quot;Appointments for Doctor &quot;));</span>
<span class="fc" id="L494">    }</span>

    //TC53
    @Test
    void testHandleDisplayDOCTORFail() {
<span class="fc" id="L499">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;D001&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L500">        Bookhosp.main(args);</span>
<span class="fc" id="L501">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L502">        assertFalse(consoleOutput.contains(&quot;Appointments for Doctor &quot;));</span>
<span class="fc" id="L503">    }</span>

    //TC54
    @Test
    void testHandleDisplayDOCTORIDFail() {
<span class="fc" id="L508">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;D999&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L509">        Bookhosp.main(args);</span>
<span class="fc" id="L510">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L511">        assertTrue(consoleOutput.contains(&quot;Error: Doctor with ID &quot;));</span>
<span class="fc" id="L512">    }</span>


    //TC46
    @Test
    void testHandleDisplayAll() {
<span class="fc" id="L518">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;ALL&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L519">        Bookhosp.main(args);</span>
<span class="fc" id="L520">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L521">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L522">    }</span>

    //TC09
    @Test
    void testHandleDisplaySurgery() {
<span class="fc" id="L527">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;SURGERY&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L528">        Bookhosp.main(args);</span>
<span class="fc" id="L529">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L530">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L531">    }</span>

    //TC55
    @Test
    void testHandleDisplayPediatrics() {
<span class="fc" id="L536">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;PEDIATRICS&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L537">        Bookhosp.main(args);</span>
<span class="fc" id="L538">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L539">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L540">    }</span>

    //TC56
    @Test
    void testHandleDisplayGeneral() {
<span class="fc" id="L545">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;GENERAL&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L546">        Bookhosp.main(args);</span>
<span class="fc" id="L547">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L548">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L549">    }</span>

    //TC57
    @Test
    void testHandleDisplayFailOption() {
<span class="fc" id="L554">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot; &quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L555">        Bookhosp.main(args);</span>
<span class="fc" id="L556">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L557">        assertTrue(consoleOutput.contains(&quot;Invalid argument. Use 'ALL', 'GENERAL', 'PEDIATRICS', 'SURGERY', or 'DOCTOR &lt;Doctor_ID&gt;'.&quot;));</span>
<span class="fc" id="L558">    }</span>

    //TC58
    @Test
    void testErrorFileDisplay() {
<span class="fc" id="L563">        String[] args = {&quot;display&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;ALL&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L564">        Bookhosp.main(args);</span>
<span class="fc" id="L565">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L566">        assertTrue(consoleOutput.contains(&quot;Error reading doctors file: &quot;));</span>
<span class="fc" id="L567">    }</span>

    /* Search Functionality */
    //TC59
    @Test
    void testSearchInValidCommandIntroduced() {
<span class="fc" id="L573">        String[] args = {&quot;search&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L574">        Bookhosp.main(args);</span>
<span class="fc" id="L575">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L576">        assertTrue(consoleOutput.contains(&quot;Usage: search &lt;patients.json&gt; &lt;PATIENT ID&gt;&quot;));</span>
<span class="fc" id="L577">    }</span>

    //TC60
    @Test
    void testSearchExistingPatient() {
<span class="fc" id="L582">        String[] args = {&quot;search&quot;, TEMP_PATIENTS_FILE, &quot;P001&quot;};</span>
<span class="fc" id="L583">        Bookhosp.main(args);</span>
<span class="fc" id="L584">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L585">        assertTrue(consoleOutput.contains(&quot;Appointments for Patient P001&quot;), &quot;Patient with ID 'P001' should exist.&quot;);</span>
<span class="fc" id="L586">    }</span>

    //TC10
    @Test
    void testSearchNonExistentPatient() {
<span class="fc" id="L591">        String[] args = {&quot;search&quot;, TEMP_PATIENTS_FILE, &quot;P999&quot;};</span>
<span class="fc" id="L592">        Bookhosp.main(args);</span>
<span class="fc" id="L593">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L594">        assertTrue(consoleOutput.contains(&quot;Error: Patient ID not found&quot;), &quot;Patient with ID 'P999' should not exist.&quot;);</span>
<span class="fc" id="L595">    }</span>

    //TC61
    @Test
    void testErrorFileSearchPatient() {
<span class="fc" id="L600">        String[] args = {&quot;search&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;P001&quot;};</span>
<span class="fc" id="L601">        Bookhosp.main(args);</span>
<span class="fc" id="L602">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L603">        assertTrue(consoleOutput.contains(&quot;Error reading patients file: &quot;));</span>
<span class="fc" id="L604">    }</span>

    /* Add Functionality */
    //TC11
    @Test
    void testAddInValidCommandIntroduced() {
<span class="fc" id="L610">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L611">        Bookhosp.main(args);</span>
<span class="fc" id="L612">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L613">        assertTrue(consoleOutput.contains(&quot;Usage: add &lt;patient.json&gt; &lt;doctor.json&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L614">    }</span>

    //TC12
    @Test
    void testAddDoctor() {
<span class="fc" id="L619">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, TEMP_DOCTORS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L620">        Bookhosp.main(args);</span>
<span class="fc" id="L621">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L622">        assertTrue(consoleOutput.contains(&quot;Doctors added successfully!&quot;));</span>
<span class="fc" id="L623">    }</span>

    //TC13
    @Test
    void testErrorWriteAddDoctor() {
<span class="fc" id="L628">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L629">        Bookhosp.main(args);</span>
<span class="fc" id="L630">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L631">        assertTrue(consoleOutput.contains(&quot;Error reading input file: &quot;));</span>
<span class="fc" id="L632">    }</span>

    //TC14
    @Test
    void testAddPatientErrorAdmin() {
<span class="fc" id="L637">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;PATIENT&quot;, TEMP_PATIENTS_FILE, &quot;PATIENT&quot;};</span>
<span class="fc" id="L638">        Bookhosp.main(args);</span>
<span class="fc" id="L639">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L640">        assertTrue(consoleOutput.contains(&quot;Usage: add &lt;patient.json&gt; &lt;doctor.json&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L641">    }</span>

    //TC62
    @Test
    void testAddPatient() {
<span class="fc" id="L646">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;PATIENT&quot;, TEMP_PATIENTS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L647">        Bookhosp.main(args);</span>
<span class="fc" id="L648">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L649">        assertTrue(consoleOutput.contains(&quot;Patients added successfully!&quot;));</span>
<span class="fc" id="L650">    }</span>

    //TC15
    @Test
    void testErrorWriteAddPatient() {
<span class="fc" id="L655">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;PATIENT&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L656">        Bookhosp.main(args);</span>
<span class="fc" id="L657">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L658">        assertTrue(consoleOutput.contains(&quot;Error reading input file: &quot;));</span>
<span class="fc" id="L659">    }</span>

    //TC16
    @Test
    void testInvalidTypeAddPatient() {
<span class="fc" id="L664">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot; &quot;, TEMP_PATIENTS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L665">        Bookhosp.main(args);</span>
<span class="fc" id="L666">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L667">        assertTrue(consoleOutput.contains(&quot;Error: Invalid type. Use DOCTOR or PATIENT.&quot;));</span>
<span class="fc" id="L668">    }</span>

    /* Delete Functionality */
    //TC17
    @Test
    void testDeleteInValidCommandIntroduced() {
<span class="fc" id="L674">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L675">        Bookhosp.main(args);</span>
<span class="fc" id="L676">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L677">        assertTrue(consoleOutput.contains(&quot;Usage: delete &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; --admin&quot;));</span>
<span class="fc" id="L678">    }</span>

    //TC18
    @Test
    void testDeleteErrorAdmin() {
<span class="fc" id="L683">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, &quot;DOCTOR&quot;};</span>
<span class="fc" id="L684">        Bookhosp.main(args);</span>
<span class="fc" id="L685">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L686">        assertTrue(consoleOutput.contains(&quot;Usage: delete &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; --admin&quot;));</span>
<span class="fc" id="L687">    }</span>

    //TC63
    @Test
    void testDeleteDoctor() {
<span class="fc" id="L692">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L693">        Bookhosp.main(args);</span>
<span class="fc" id="L694">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L695">        assertTrue(consoleOutput.contains(&quot;Doctor deleted successfully!&quot;));</span>
<span class="fc" id="L696">    }</span>

    //TC19
    @Test
    void testDeleteDoctorInvalid() {
<span class="fc" id="L701">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D999&quot;, &quot;DOCTOR&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L702">        Bookhosp.main(args);</span>
<span class="fc" id="L703">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L704">        assertFalse(consoleOutput.contains(&quot;Doctor deleted successfully!&quot;));</span>
<span class="fc" id="L705">    }</span>

    //TC64
    @Test
    void testDeletePatient() {
<span class="fc" id="L710">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L711">        Bookhosp.main(args);</span>
<span class="fc" id="L712">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L713">        assertTrue(consoleOutput.contains(&quot;Patient deleted successfully!&quot;));</span>
<span class="fc" id="L714">    }</span>

    //TC20
    @Test
    void testDeletePatientInvalid() {
<span class="fc" id="L719">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P999&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L720">        Bookhosp.main(args);</span>
<span class="fc" id="L721">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L722">        assertFalse(consoleOutput.contains(&quot;Patient deleted successfully!&quot;));</span>
<span class="fc" id="L723">    }</span>

    //TC65
    @Test
    void testInvalidTypeDeletePatient() {
<span class="fc" id="L728">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot; &quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L729">        Bookhosp.main(args);</span>
<span class="fc" id="L730">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L731">        assertTrue(consoleOutput.contains(&quot;Error: Invalid type. Use DOCTOR or PATIENT.&quot;));</span>
<span class="fc" id="L732">    }</span>

    //TC21
    @Test
    void testErrorWriteDeletePatient() {
<span class="fc" id="L737">        String[] args = {&quot;delete&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;P001&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L738">        Bookhosp.main(args);</span>
<span class="fc" id="L739">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L740">        assertTrue(consoleOutput.contains(&quot;Error deleting record: &quot;));</span>
<span class="fc" id="L741">    }</span>

    //TC22
    @Test
    void testErrorWriteDeleteDoctor() {
<span class="fc" id="L746">        String[] args = {&quot;delete&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;D001&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L747">        Bookhosp.main(args);</span>
<span class="fc" id="L748">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L749">        assertTrue(consoleOutput.contains(&quot;Error deleting record: &quot;));</span>
<span class="fc" id="L750">    }</span>


    /* Modify Functionality */
    //TC23
    @Test
    void testModifyInValidCommandIntroduced() {
<span class="fc" id="L757">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L758">        Bookhosp.main(args);</span>
<span class="fc" id="L759">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L760">        assertTrue(consoleOutput.contains(&quot;Usage: modify &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L761">    }</span>

    //TC24
    @Test
    void testModifyErrorAdmin() {
<span class="fc" id="L766">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, TEMP_INPUT_DOCTOR_FILE, &quot;DOCTOR&quot;};</span>
<span class="fc" id="L767">        Bookhosp.main(args);</span>
<span class="fc" id="L768">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L769">        assertTrue(consoleOutput.contains(&quot;Usage: modify &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L770">    }</span>

    //TC66
    @Test
    void testModifyDoctor() {
<span class="fc" id="L775">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, TEMP_INPUT_DOCTOR_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L776">        Bookhosp.main(args);</span>
<span class="fc" id="L777">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L778">        assertTrue(consoleOutput.contains(&quot;Doctor modified successfully!&quot;));</span>
<span class="fc" id="L779">    }</span>

    //TC25
    @Test
    void testModifyDoctorInvalid() {
<span class="fc" id="L784">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D999&quot;, &quot;DOCTOR&quot;, TEMP_INPUT_DOCTOR_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L785">        Bookhosp.main(args);</span>
<span class="fc" id="L786">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L787">        assertFalse(consoleOutput.contains(&quot;Doctor modified successfully!&quot;));</span>
<span class="fc" id="L788">    }</span>

    //TC67
    @Test
    void testModifyPatient() {
<span class="fc" id="L793">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;PATIENT&quot;, TEMP_INPUT_PATIENT_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L794">        Bookhosp.main(args);</span>
<span class="fc" id="L795">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L796">        assertTrue(consoleOutput.contains(&quot;Patient modified successfully!&quot;));</span>
<span class="fc" id="L797">    }</span>

    //TC26
    @Test
    void testModifyPatientInvalid() {
<span class="fc" id="L802">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P999&quot;, &quot;PATIENT&quot;, TEMP_INPUT_PATIENT_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L803">        Bookhosp.main(args);</span>
<span class="fc" id="L804">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L805">        assertFalse(consoleOutput.contains(&quot;Patient modified successfully!&quot;));</span>
<span class="fc" id="L806">    }</span>

    //TC68
    @Test
    void testErrorWriteModifyDoctor() {
<span class="fc" id="L811">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, &quot;TEMP_INPUT_DOCTOR_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L812">        Bookhosp.main(args);</span>
<span class="fc" id="L813">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L814">        assertTrue(consoleOutput.contains(&quot;Error modifying record: &quot;));</span>
<span class="fc" id="L815">    }</span>

    //TC27
    @Test
    void testErrorWriteModifyPatient() {
<span class="fc" id="L820">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;PATIENT&quot;, &quot;TEMP_INPUT_PATIENT_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L821">        Bookhosp.main(args);</span>
<span class="fc" id="L822">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L823">        assertTrue(consoleOutput.contains(&quot;Error modifying record: &quot;));</span>
<span class="fc" id="L824">    }</span>

    //TC28
    @Test
    void testInvalidTypeModify() {
<span class="fc" id="L829">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot; &quot;, TEMP_INPUT_PATIENT_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L830">        Bookhosp.main(args);</span>
<span class="fc" id="L831">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L832">        assertTrue(consoleOutput.contains(&quot;Error: Invalid type. Use DOCTOR or PATIENT.&quot;));</span>
<span class="fc" id="L833">    }</span>


    /* Handle View Schedule Functionality */
    //TC30
    @Test
    void testVWScheduleInValidCommandIntroduced() {
<span class="fc" id="L840">        String[] args = {&quot;view-schedule&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L841">        Bookhosp.main(args);</span>
<span class="fc" id="L842">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L843">        assertTrue(consoleOutput.contains(&quot;Usage: view-schedule &lt;doctor.json&gt; &lt;Doctor ID|GENERAL|PEDIATRICS|SURGERY&gt;&quot;));</span>
<span class="fc" id="L844">    }</span>

    //TC31
    @Test
    void testVWSchedule() {
<span class="fc" id="L849">        String[] args = {&quot;view-schedule&quot;, TEMP_DOCTORS_FILE, &quot;GENERAL&quot;};</span>
<span class="fc" id="L850">        Bookhosp.main(args);</span>
<span class="fc" id="L851">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L852">        assertTrue(consoleOutput.contains(&quot;Schedule for &quot;));</span>
<span class="fc" id="L853">    }</span>

    //TC32
    @Test
    void testVWSchedule2() {
<span class="fc" id="L858">        String[] args = {&quot;view-schedule&quot;, TEMP_DOCTORS_FILE, &quot;D001&quot;};</span>
<span class="fc" id="L859">        Bookhosp.main(args);</span>
<span class="fc" id="L860">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L861">        assertTrue(consoleOutput.contains(&quot;Schedule for &quot;));</span>
<span class="fc" id="L862">    }</span>

    //TC69
    @Test
    void testVWScheduleFileError() {
<span class="fc" id="L867">        String[] args = {&quot;view-schedule&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L868">        Bookhosp.main(args);</span>
<span class="fc" id="L869">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L870">        assertTrue(consoleOutput.contains(&quot;Error reading doctors file: &quot;));</span>
<span class="fc" id="L871">    }</span>

    /* Cancel Functionality */
    //TC33
    @Test
    void testCancelInValidCommandIntroduced() {
<span class="fc" id="L877">        String[] args = {&quot;cancel&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L878">        Bookhosp.main(args);</span>
<span class="fc" id="L879">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L880">        assertTrue(consoleOutput.contains(&quot;Usage: cancel &lt;doctors.json&gt; &lt;APPOINTMENT ID&gt;&quot;));</span>
<span class="fc" id="L881">    }</span>

    //TC34
    @Test
    void testCancel() {
<span class="fc" id="L886">        String[] args = {&quot;cancel&quot;, TEMP_DOCTORS_FILE, &quot;A001&quot;};</span>
<span class="fc" id="L887">        Bookhosp.main(args);</span>
<span class="fc" id="L888">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L889">        assertTrue(consoleOutput.contains(&quot;cancelled&quot;));</span>
<span class="fc" id="L890">    }</span>

    //TC35
    @Test
    void testCancelErrorAppointmentID() {
<span class="fc" id="L895">        String[] args = {&quot;cancel&quot;, TEMP_DOCTORS_FILE, &quot;dere&quot;};</span>
<span class="fc" id="L896">        Bookhosp.main(args);</span>
<span class="fc" id="L897">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L898">        assertTrue(consoleOutput.contains(&quot;Error: Appointment ID not found.&quot;));</span>
<span class="fc" id="L899">    }</span>

    //TC36
    @Test
    void testCancelFileError() {
<span class="fc" id="L904">        String[] args = {&quot;cancel&quot;, &quot;file_example.json&quot;, &quot;A001&quot;};</span>
<span class="fc" id="L905">        Bookhosp.main(args);</span>
<span class="fc" id="L906">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L907">        assertTrue(consoleOutput.contains(&quot;Error handling cancellation: &quot;));</span>
<span class="fc" id="L908">    }</span>

    /* Overdue Functionality */
    //TC37
    @Test
    void testOverdueInValidCommandIntroduced() {
<span class="fc" id="L914">        String[] args = {&quot;overdue&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;--admin&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L915">        Bookhosp.main(args);</span>
<span class="fc" id="L916">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L917">        assertTrue(consoleOutput.contains(&quot;Usage: overdue &lt;patients.json&gt; --admin&quot;));</span>
<span class="fc" id="L918">    }</span>

    //TC70
    @Test
    void testOverdueErrorAdminIntroduced() {
<span class="fc" id="L923">        String[] args = {&quot;overdue&quot;, &quot;--admin&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L924">        Bookhosp.main(args);</span>
<span class="fc" id="L925">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L926">        assertTrue(consoleOutput.contains(&quot;Error: Unauthorized access. This command is available only to administrators.&quot;));</span>
<span class="fc" id="L927">    }</span>

    //TC38
    @Test
    void testOverdue() {
<span class="fc" id="L932">        String[] args = {&quot;overdue&quot;, TEMP_PATIENTS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L933">        Bookhosp.main(args);</span>
<span class="fc" id="L934">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L935">        assertTrue(consoleOutput.contains(&quot;Overdue:&quot;));</span>
<span class="fc" id="L936">    }</span>

    //TC71
    @Test
    void testOverdueAppointmentDateAfterToday() throws IOException {
<span class="fc" id="L941">        JSONArray patient1Appointments = new JSONArray();</span>
<span class="fc" id="L942">        patient1Appointments.put(new JSONObject()</span>
<span class="fc" id="L943">                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L944">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L945">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L946">                .put(&quot;date&quot;, &quot;2024-12-25&quot;)</span>
<span class="fc" id="L947">                .put(&quot;time&quot;, &quot;10:30&quot;)</span>
<span class="fc" id="L948">                .put(&quot;status&quot;, &quot;Scheduled&quot;)</span>
<span class="fc" id="L949">                .put(&quot;notes&quot;, &quot;Routine check-up.&quot;));</span>
<span class="fc" id="L950">        JSONArray patients = new JSONArray();</span>
<span class="fc" id="L951">        patients.put(new JSONObject()</span>
<span class="fc" id="L952">                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L953">                .put(&quot;name&quot;, &quot;Patient 1&quot;)</span>
<span class="fc" id="L954">                .put(&quot;age&quot;, 35)</span>
<span class="fc" id="L955">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L956">                .put(&quot;date_of_birth&quot;, &quot;15/01/1998&quot;)</span>
<span class="fc" id="L957">                .put(&quot;appointments&quot;, patient1Appointments));</span>
<span class="fc" id="L958">        Files.write(Paths.get(&quot;patients_overdue.json&quot;), patients.toString().getBytes());</span>

<span class="fc" id="L960">        String[] args = {&quot;overdue&quot;, &quot;patients_overdue.json&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L961">        Bookhosp.main(args);</span>
<span class="fc" id="L962">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L963">        assertFalse(consoleOutput.contains(&quot;Overdue:&quot;));</span>
<span class="fc" id="L964">    }</span>

    //TC80
    @Test
    void testNoOverdue() {
<span class="fc" id="L969">        String[] args = {&quot;overdue&quot;, TEMP_PATIENTS_OVERDUES_FAIL_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L970">        Bookhosp.main(args);</span>
<span class="fc" id="L971">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L972">        assertFalse(consoleOutput.contains(&quot;Overdue:&quot;));</span>
<span class="fc" id="L973">    }</span>

    //TC39
    @Test
    void testOverdueErrorFile() {
<span class="fc" id="L978">        String[] args = {&quot;overdue&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L979">        Bookhosp.main(args);</span>
<span class="fc" id="L980">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L981">        assertTrue(consoleOutput.contains(&quot;Error reading patients file: &quot;));</span>
<span class="fc" id="L982">    }</span>

    /* Reschedule Functionality */
    //TC40
    @Test
    void testRescheduleInValidCommandIntroduced() {
<span class="fc" id="L988">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L989">        Bookhosp.main(args);</span>
<span class="fc" id="L990">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L991">        assertTrue(consoleOutput.contains(&quot;reschedule &lt;patient.json&gt; &lt;doctor.json&gt; &lt;PATIENT ID&gt; &lt;APPOINTMENT ID&gt; &lt;DEPARTMENT&gt; [Option]&quot;));</span>
<span class="fc" id="L992">    }</span>

    //TC41
    @Test
    void testReschedule() {
<span class="fc" id="L997">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A002&quot;, &quot;SURGERY&quot;};</span>
<span class="fc" id="L998">        Bookhosp.main(args);</span>
<span class="fc" id="L999">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1000">        assertTrue(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L1001">    }</span>

    //TC42
    @Test
    void testRescheduleFail1() {
<span class="fc" id="L1006">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A001&quot;, &quot; &quot;};</span>
<span class="fc" id="L1007">        Bookhosp.main(args);</span>
<span class="fc" id="L1008">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1009">        assertFalse(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L1010">    }</span>
    //TC72
    @Test
    void testRescheduleFail2() {
<span class="fc" id="L1014">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A999&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L1015">        Bookhosp.main(args);</span>
<span class="fc" id="L1016">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1017">        assertFalse(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L1018">    }</span>

    //TC73
    @Test
    void testRescheduleFail3() {
<span class="fc" id="L1023">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L1024">        Bookhosp.main(args);</span>
<span class="fc" id="L1025">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1026">        assertFalse(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L1027">    }</span>

    //TC74
    @Test
    void testRescheduleErrorID() {
<span class="fc" id="L1032">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;02&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L1033">        Bookhosp.main(args);</span>
<span class="fc" id="L1034">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1035">        assertTrue(consoleOutput.contains(&quot;Error: Appointment ID not found.&quot;));</span>
<span class="fc" id="L1036">    }</span>

    //TC43
    @Test
    void testRescheduleErrorFile() {
<span class="fc" id="L1041">        String[] args = {&quot;reschedule&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;P001&quot;, &quot;A001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L1042">        Bookhosp.main(args);</span>
<span class="fc" id="L1043">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1044">        assertTrue(consoleOutput.contains(&quot;Error handling reschedule: &quot;));</span>
<span class="fc" id="L1045">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>