<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BookhospTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">BookhospTest Coverage Results</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">BookhospTest.java</span></div><h1>BookhospTest.java</h1><pre class="source lang-java linenums">import org.json.JSONArray;
import org.json.JSONObject;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.PrintStream;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.time.LocalDate;

import static org.junit.jupiter.api.Assertions.*;

<span class="fc" id="L17">class BookhospTest {</span>

    private static final String TEMP_PATIENTS_FILE = &quot;test_patients.json&quot;;
    private static final String TEMP_DOCTORS_FILE = &quot;test_doctors.json&quot;;
    private static final String TEMP_INPUT_DOCTOR_FILE = &quot;test_input_doctor.json&quot;;
    private static final String TEMP_INPUT_PATIENT_FILE = &quot;test_input_patient.json&quot;;
    private static final String TEMP_PATIENTS_OVERDUES_FAIL_FILE = &quot;test_overdues_fail_patients.json&quot;;

<span class="fc" id="L25">    private final ByteArrayOutputStream outputStreamCaptor = new ByteArrayOutputStream();</span>
    private PrintStream originalOut;

    @BeforeEach
    void setUp() throws IOException {
        //Normal Case
<span class="fc" id="L31">        JSONArray patient1Appointments = new JSONArray();</span>
<span class="fc" id="L32">        patient1Appointments.put(new JSONObject()</span>
<span class="fc" id="L33">                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L34">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L35">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L36">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L37">                .put(&quot;time&quot;, &quot;10:30&quot;)</span>
<span class="fc" id="L38">                .put(&quot;status&quot;, &quot;Scheduled&quot;)</span>
<span class="fc" id="L39">                .put(&quot;notes&quot;, &quot;Routine check-up.&quot;));</span>
<span class="fc" id="L40">        patient1Appointments.put(new JSONObject()</span>
<span class="fc" id="L41">                .put(&quot;appointment_id&quot;, &quot;A002&quot;)</span>
<span class="fc" id="L42">                .put(&quot;department&quot;, &quot;SURGERY&quot;)</span>
<span class="fc" id="L43">                .put(&quot;doctor_id&quot;, &quot;D003&quot;)</span>
<span class="fc" id="L44">                .put(&quot;date&quot;, &quot;2024-11-30&quot;)</span>
<span class="fc" id="L45">                .put(&quot;time&quot;, &quot;13:00&quot;)</span>
<span class="fc" id="L46">                .put(&quot;status&quot;, &quot;Cancelled&quot;)</span>
<span class="fc" id="L47">                .put(&quot;notes&quot;, &quot;Patient requested reschedule.&quot;));</span>
<span class="fc" id="L48">        JSONArray patients = new JSONArray();</span>
<span class="fc" id="L49">        patients.put(new JSONObject()</span>
<span class="fc" id="L50">                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L51">                .put(&quot;name&quot;, &quot;Patient 1&quot;)</span>
<span class="fc" id="L52">                .put(&quot;age&quot;, 35)</span>
<span class="fc" id="L53">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L54">                .put(&quot;date_of_birth&quot;, &quot;15/01/1998&quot;)</span>
<span class="fc" id="L55">                .put(&quot;appointments&quot;, patient1Appointments));</span>
<span class="fc" id="L56">        patients.put(new JSONObject()</span>
<span class="fc" id="L57">                .put(&quot;patient_id&quot;, &quot;P002&quot;)</span>
<span class="fc" id="L58">                .put(&quot;name&quot;, &quot;Patient 2&quot;)</span>
<span class="fc" id="L59">                .put(&quot;age&quot;, 57)</span>
<span class="fc" id="L60">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L61">                .put(&quot;date_of_birth&quot;, &quot;15/05/1968&quot;)</span>
<span class="fc" id="L62">                .put(&quot;appointments&quot;, new JSONArray()));</span>

<span class="fc" id="L64">        JSONArray doctors = new JSONArray();</span>

<span class="fc" id="L66">        JSONArray doctor1Schedule = new JSONArray();</span>
<span class="fc" id="L67">        doctor1Schedule.put(new JSONObject()</span>
<span class="fc" id="L68">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L69">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L70">                        .put(new JSONObject()</span>
<span class="fc" id="L71">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L72">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L73">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L74">                        .put(new JSONObject()</span>
<span class="fc" id="L75">                                .put(&quot;appointment_id&quot;, &quot;A003&quot;)</span>
<span class="fc" id="L76">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L77">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L78">                        .put(new JSONObject()</span>
<span class="fc" id="L79">                                .put(&quot;appointment_id&quot;, &quot;A005&quot;)</span>
<span class="fc" id="L80">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L81">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L82">                        .put(new JSONObject()</span>
<span class="fc" id="L83">                                .put(&quot;appointment_id&quot;, &quot;A006&quot;)</span>
<span class="fc" id="L84">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L85">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L86">                        .put(new JSONObject()</span>
<span class="fc" id="L87">                                .put(&quot;appointment_id&quot;, &quot;A007&quot;)</span>
<span class="fc" id="L88">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L89">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L90">                        .put(new JSONObject()</span>
<span class="fc" id="L91">                                .put(&quot;appointment_id&quot;, &quot;A008&quot;)</span>
<span class="fc" id="L92">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L93">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L94">                        .put(new JSONObject()</span>
<span class="fc" id="L95">                                .put(&quot;appointment_id&quot;, &quot;A009&quot;)</span>
<span class="fc" id="L96">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L97">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L98">                        .put(new JSONObject()</span>
<span class="fc" id="L99">                                .put(&quot;appointment_id&quot;, &quot;A002&quot;)</span>
<span class="fc" id="L100">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L101">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L102">                        .put(new JSONObject()</span>
<span class="fc" id="L103">                                .put(&quot;appointment_id&quot;, &quot;A020&quot;)</span>
<span class="fc" id="L104">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L105">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L106">                        .put(new JSONObject()</span>
<span class="fc" id="L107">                                .put(&quot;appointment_id&quot;, &quot;A021&quot;)</span>
<span class="fc" id="L108">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L109">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L110">                        .put(new JSONObject()</span>
<span class="fc" id="L111">                                .put(&quot;appointment_id&quot;, &quot;A031&quot;)</span>
<span class="fc" id="L112">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L113">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L116">        doctors.put(new JSONObject()</span>
<span class="fc" id="L117">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L118">                .put(&quot;name&quot;, &quot;Doctor 1&quot;)</span>
<span class="fc" id="L119">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L120">                .put(&quot;specialization&quot;, &quot;General Medicine&quot;)</span>
<span class="fc" id="L121">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L122">                .put(&quot;schedule&quot;, doctor1Schedule));</span>

<span class="fc" id="L124">        JSONArray doctor2Schedule = new JSONArray();</span>
<span class="fc" id="L125">        doctor2Schedule.put(new JSONObject()</span>
<span class="fc" id="L126">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L127">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L128">                        .put(new JSONObject()</span>
<span class="fc" id="L129">                                .put(&quot;appointment_id&quot;, &quot;A041&quot;)</span>
<span class="fc" id="L130">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L131">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L132">                        .put(new JSONObject()</span>
<span class="fc" id="L133">                                .put(&quot;appointment_id&quot;, &quot;A043&quot;)</span>
<span class="fc" id="L134">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L135">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L138">        doctors.put(new JSONObject()</span>
<span class="fc" id="L139">                .put(&quot;doctor_id&quot;, &quot;D002&quot;)</span>
<span class="fc" id="L140">                .put(&quot;name&quot;, &quot;Doctor 2&quot;)</span>
<span class="fc" id="L141">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L142">                .put(&quot;specialization&quot;, &quot;Pediatrics&quot;)</span>
<span class="fc" id="L143">                .put(&quot;department&quot;, &quot;PEDIATRICS&quot;)</span>
<span class="fc" id="L144">                .put(&quot;schedule&quot;, doctor2Schedule));</span>

<span class="fc" id="L146">        JSONArray doctor3Schedule = new JSONArray();</span>

<span class="fc" id="L148">        doctor3Schedule.put(new JSONObject()</span>
<span class="fc" id="L149">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L150">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L151">                        .put(new JSONObject()</span>
<span class="fc" id="L152">                                .put(&quot;appointment_id&quot;, &quot;A021&quot;)</span>
<span class="fc" id="L153">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L154">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L155">                        .put(new JSONObject()</span>
<span class="fc" id="L156">                                .put(&quot;appointment_id&quot;, &quot;A033&quot;)</span>
<span class="fc" id="L157">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L158">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L161">        doctors.put(new JSONObject()</span>
<span class="fc" id="L162">                .put(&quot;doctor_id&quot;, &quot;D003&quot;)</span>
<span class="fc" id="L163">                .put(&quot;name&quot;, &quot;Doctor 3&quot;)</span>
<span class="fc" id="L164">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L165">                .put(&quot;specialization&quot;, &quot;Surgery&quot;)</span>
<span class="fc" id="L166">                .put(&quot;department&quot;, &quot;SURGERY&quot;)</span>
<span class="fc" id="L167">                .put(&quot;schedule&quot;, doctor3Schedule));</span>
<span class="fc" id="L168">        JSONObject inputDoctor = new JSONObject()</span>
<span class="fc" id="L169">                .put(&quot;doctor_id&quot;, &quot;&quot;)</span>
<span class="fc" id="L170">                .put(&quot;name&quot;, &quot;&quot;)</span>
<span class="fc" id="L171">                .put(&quot;gender&quot;, &quot;&quot;)</span>
<span class="fc" id="L172">                .put(&quot;specialization&quot;, &quot;&quot;)</span>
<span class="fc" id="L173">                .put(&quot;department&quot;, &quot;&quot;)</span>
<span class="fc" id="L174">                .put(&quot;schedule&quot;, new JSONArray());</span>
<span class="fc" id="L175">        JSONObject inputPatient = new JSONObject()</span>
<span class="fc" id="L176">                .put(&quot;patient_id&quot;, &quot;&quot;)</span>
<span class="fc" id="L177">                .put(&quot;name&quot;, &quot;&quot;)</span>
<span class="fc" id="L178">                .put(&quot;age&quot;, 0)</span>
<span class="fc" id="L179">                .put(&quot;gender&quot;, &quot;&quot;)</span>
<span class="fc" id="L180">                .put(&quot;date_of_birth&quot;, &quot;&quot;)</span>
<span class="fc" id="L181">                .put(&quot;appointments&quot;, new JSONArray());</span>

        //Sample to prove fail overdue
<span class="fc" id="L184">        JSONArray patient1OverAppointments = new JSONArray();</span>
<span class="fc" id="L185">        patient1OverAppointments.put(new JSONObject()</span>
<span class="fc" id="L186">                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L187">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L188">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L189">                .put(&quot;date&quot;, &quot;2024-11-25&quot;)</span>
<span class="fc" id="L190">                .put(&quot;time&quot;, &quot;10:30&quot;)</span>
<span class="fc" id="L191">                .put(&quot;status&quot;, &quot;Cancelled&quot;)</span>
<span class="fc" id="L192">                .put(&quot;notes&quot;, &quot;Routine check-up.&quot;));</span>
<span class="fc" id="L193">        JSONArray patientsOver = new JSONArray();</span>
<span class="fc" id="L194">        patients.put(new JSONObject()</span>
<span class="fc" id="L195">                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L196">                .put(&quot;name&quot;, &quot;Patient 1&quot;)</span>
<span class="fc" id="L197">                .put(&quot;age&quot;, 35)</span>
<span class="fc" id="L198">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L199">                .put(&quot;date_of_birth&quot;, &quot;15/01/1998&quot;)</span>
<span class="fc" id="L200">                .put(&quot;appointments&quot;, patient1OverAppointments));</span>

<span class="fc" id="L202">        Files.write(Paths.get(TEMP_PATIENTS_FILE), patients.toString().getBytes());</span>
<span class="fc" id="L203">        Files.write(Paths.get(TEMP_DOCTORS_FILE), doctors.toString().getBytes());</span>
<span class="fc" id="L204">        Files.write(Paths.get(TEMP_INPUT_DOCTOR_FILE), inputDoctor.toString().getBytes());</span>
<span class="fc" id="L205">        Files.write(Paths.get(TEMP_INPUT_PATIENT_FILE), inputPatient.toString().getBytes());</span>
<span class="fc" id="L206">        Files.write(Paths.get(TEMP_PATIENTS_OVERDUES_FAIL_FILE), patientsOver.toString().getBytes());</span>
<span class="fc" id="L207">        originalOut = System.out;</span>
<span class="fc" id="L208">        System.setOut(new PrintStream(outputStreamCaptor));</span>
<span class="fc" id="L209">    }</span>

    @AfterEach
    void cleanUp() {
<span class="fc" id="L213">        new File(TEMP_PATIENTS_FILE).delete();</span>
<span class="fc" id="L214">        new File(TEMP_DOCTORS_FILE).delete();</span>
<span class="fc" id="L215">        new File(TEMP_INPUT_DOCTOR_FILE).delete();</span>
<span class="fc" id="L216">        new File(TEMP_INPUT_PATIENT_FILE).delete();</span>
<span class="fc" id="L217">        new File(TEMP_PATIENTS_OVERDUES_FAIL_FILE).delete();</span>

<span class="fc" id="L219">        System.setOut(originalOut);</span>

<span class="fc" id="L221">        System.out.println(&quot;Test output was:\n&quot; + outputStreamCaptor);</span>
<span class="fc" id="L222">    }</span>

    //TC01
    @Test
    void testWhereCommandIsNotIntroduced() {
<span class="fc" id="L227">        String[] args = {};</span>
<span class="fc" id="L228">        Bookhosp.main(args);</span>
<span class="fc" id="L229">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L230">        assertTrue(consoleOutput.contains(&quot;Error: Insufficient arguments. Usage: Bookhosp &lt;command&gt; [options]&quot;));</span>
<span class="fc" id="L231">    }</span>

    //TC04
    @Test
    void testInvalidOption() {
<span class="fc" id="L236">        String[] args = {&quot;testing&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE};</span>
<span class="fc" id="L237">        Bookhosp.main(args);</span>
<span class="fc" id="L238">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L239">        assertTrue(consoleOutput.contains(&quot;Unknown command&quot;));</span>
<span class="fc" id="L240">    }</span>

    //TC05
    @Test
    void testHelpCommand() {
<span class="fc" id="L245">        String[] args = {&quot;help&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE};</span>
<span class="fc" id="L246">        Bookhosp.main(args);</span>
<span class="fc" id="L247">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L248">        assertTrue(consoleOutput.contains(&quot;Available commands&quot;), &quot;Help Message is not correct&quot;);</span>

<span class="fc" id="L250">    }</span>

    @Test
    void testHelpCommandWithLog() {
<span class="fc" id="L254">        String[] args = {&quot;help&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;--log&quot;};</span>
<span class="fc" id="L255">        Bookhosp.main(args);</span>
<span class="fc" id="L256">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L257">        assertTrue(consoleOutput.contains(&quot;Available commands&quot;), &quot;Help Message is not correct&quot;);</span>

<span class="fc" id="L259">    }</span>

    @Test
    void testNoLogPermissionWrite() {
<span class="fc" id="L263">        File logFile = new File(&quot;log.txt&quot;);</span>
        try {
<span class="pc bpc" id="L265" title="3 of 4 branches missed.">            if (logFile.exists() || logFile.createNewFile()) {</span>
<span class="fc" id="L266">                logFile.setReadOnly();</span>
            }
<span class="nc" id="L268">        } catch (IOException e) {</span>
<span class="nc" id="L269">            System.err.println(&quot;Failed to set up the test file.&quot;);</span>
<span class="nc" id="L270">            return;</span>
<span class="fc" id="L271">        }</span>

<span class="fc" id="L273">        String[] args = {&quot;help&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;--log&quot;};</span>
<span class="fc" id="L274">        Bookhosp.main(args);</span>
<span class="fc" id="L275">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L276">        logFile.setWritable(true);</span>
<span class="fc" id="L277">        assertTrue(consoleOutput.contains(&quot;Failed to write to log file.&quot;), &quot;Log write in log&quot;);</span>

<span class="fc" id="L279">    }</span>

    /* Booking Functionality*/
    //TC06
    @Test
    void testHandleBookingWithValidDataGeneral() {
<span class="fc" id="L285">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L286">        Bookhosp.main(args);</span>
<span class="fc" id="L287">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L288">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;), &quot;Schedule should not be empty after booking.&quot;);</span>
<span class="fc" id="L289">    }</span>

    //TC44
    @Test
    void testHandleBookingWithValidDataPediatrics() {
<span class="fc" id="L294">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;Pediatrics&quot;};</span>
<span class="fc" id="L295">        Bookhosp.main(args);</span>
<span class="fc" id="L296">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L297">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;), &quot;Schedule should not be empty after booking.&quot;);</span>
<span class="fc" id="L298">    }</span>

    //TC45
    @Test
    void testHandleBookingWithValidDataSurgery() {
<span class="fc" id="L303">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;SURGERY&quot;};</span>
<span class="fc" id="L304">        Bookhosp.main(args);</span>
<span class="fc" id="L305">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L306">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;), &quot;Schedule should not be empty after booking.&quot;);</span>
<span class="fc" id="L307">    }</span>

    //TC07
    @Test
    void testHandleBookingWithInvalidPatient() {
<span class="fc" id="L312">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P999&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L313">        Bookhosp.main(args);</span>
<span class="fc" id="L314">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L315">        assertTrue(consoleOutput.contains(&quot;Error: Patient ID not found&quot;), &quot;Patient ID should be not found&quot;);</span>
<span class="fc" id="L316">    }</span>

    //TC08
    @Test
    void testHandleBookingWithNotAllTheParams() {
<span class="fc" id="L321">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;};</span>
<span class="fc" id="L322">        Bookhosp.main(args);</span>
<span class="fc" id="L323">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L324">        assertTrue(consoleOutput.contains(&quot;Usage: book&quot;), &quot;Error message should be informed&quot;);</span>
<span class="fc" id="L325">    }</span>

    @Test
    void testErrorFileBooking() {
<span class="fc" id="L329">        String[] args = {&quot;book&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L330">        Bookhosp.main(args);</span>
<span class="fc" id="L331">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L332">        assertTrue(consoleOutput.contains(&quot;Error handling booking: &quot;));</span>
<span class="fc" id="L333">    }</span>

    @Test
    void testHandleBookingFailDepartment() {
<span class="fc" id="L337">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;&quot;};</span>
<span class="fc" id="L338">        Bookhosp.main(args);</span>
<span class="fc" id="L339">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L340">        assertTrue(consoleOutput.contains(&quot;Error: No available doctors in department &quot;));</span>
<span class="fc" id="L341">    }</span>

    @Test
    void testHandleBookingPatialOcuppiedSlots() throws IOException {
<span class="fc" id="L345">        JSONArray doctor1Schedule = new JSONArray();</span>
<span class="fc" id="L346">        doctor1Schedule.put(new JSONObject()</span>
<span class="fc" id="L347">                .put(&quot;date&quot;, &quot;2024-12-02&quot;)</span>
<span class="fc" id="L348">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L349">                        .put(new JSONObject()</span>
<span class="fc" id="L350">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L351">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L352">                                .put(&quot;time&quot;, &quot;9:00&quot;))</span>
<span class="fc" id="L353">                        .put(new JSONObject()</span>
<span class="fc" id="L354">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L355">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L356">                                .put(&quot;time&quot;, &quot;9:30&quot;))</span>
<span class="fc" id="L357">                        .put(new JSONObject()</span>
<span class="fc" id="L358">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L359">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L360">                                .put(&quot;time&quot;, &quot;10:00&quot;))</span>
                ));

<span class="fc" id="L363">        JSONArray doctors = new JSONArray();</span>
<span class="fc" id="L364">        doctors.put(new JSONObject()</span>
<span class="fc" id="L365">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L366">                .put(&quot;name&quot;, &quot;Doctor 1&quot;)</span>
<span class="fc" id="L367">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L368">                .put(&quot;specialization&quot;, &quot;General Medicine&quot;)</span>
<span class="fc" id="L369">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L370">                .put(&quot;schedule&quot;, doctor1Schedule));</span>
<span class="fc" id="L371">        Files.write(Paths.get(&quot;doctors_slots_complete.json&quot;), doctors.toString().getBytes());</span>
<span class="fc" id="L372">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, &quot;doctors_slots_complete.json&quot;, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L373">        Bookhosp.main(args);</span>
<span class="fc" id="L374">        new File(&quot;doctors_slots_complete.json&quot;).delete();</span>
<span class="fc" id="L375">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L376">        assertTrue(consoleOutput.contains(&quot;Appointment successfully booked&quot;));</span>
<span class="fc" id="L377">    }</span>

    @Test
    void testHandleBookingNoSlots() throws IOException {
<span class="fc" id="L381">        JSONArray doctor1Schedule = new JSONArray();</span>
<span class="fc" id="L382">        doctor1Schedule.put(new JSONObject()</span>
<span class="fc" id="L383">                .put(&quot;date&quot;, &quot;2024-12-02&quot;)</span>
<span class="fc" id="L384">                .put(&quot;appointments&quot;, new JSONArray()</span>
<span class="fc" id="L385">                        .put(new JSONObject()</span>
<span class="fc" id="L386">                                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L387">                                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L388">                                .put(&quot;time&quot;, &quot;10:30&quot;))</span>
<span class="fc" id="L389">                        .put(new JSONObject()</span>
<span class="fc" id="L390">                                .put(&quot;appointment_id&quot;, &quot;A003&quot;)</span>
<span class="fc" id="L391">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L392">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L393">                        .put(new JSONObject()</span>
<span class="fc" id="L394">                                .put(&quot;appointment_id&quot;, &quot;A005&quot;)</span>
<span class="fc" id="L395">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L396">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L397">                        .put(new JSONObject()</span>
<span class="fc" id="L398">                                .put(&quot;appointment_id&quot;, &quot;A006&quot;)</span>
<span class="fc" id="L399">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L400">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L401">                        .put(new JSONObject()</span>
<span class="fc" id="L402">                                .put(&quot;appointment_id&quot;, &quot;A007&quot;)</span>
<span class="fc" id="L403">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L404">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L405">                        .put(new JSONObject()</span>
<span class="fc" id="L406">                                .put(&quot;appointment_id&quot;, &quot;A008&quot;)</span>
<span class="fc" id="L407">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L408">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L409">                        .put(new JSONObject()</span>
<span class="fc" id="L410">                                .put(&quot;appointment_id&quot;, &quot;A009&quot;)</span>
<span class="fc" id="L411">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L412">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L413">                        .put(new JSONObject()</span>
<span class="fc" id="L414">                                .put(&quot;appointment_id&quot;, &quot;A002&quot;)</span>
<span class="fc" id="L415">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L416">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L417">                        .put(new JSONObject()</span>
<span class="fc" id="L418">                                .put(&quot;appointment_id&quot;, &quot;A020&quot;)</span>
<span class="fc" id="L419">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L420">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L421">                        .put(new JSONObject()</span>
<span class="fc" id="L422">                                .put(&quot;appointment_id&quot;, &quot;A021&quot;)</span>
<span class="fc" id="L423">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L424">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
<span class="fc" id="L425">                        .put(new JSONObject()</span>
<span class="fc" id="L426">                                .put(&quot;appointment_id&quot;, &quot;A031&quot;)</span>
<span class="fc" id="L427">                                .put(&quot;patient_id&quot;, &quot;P003&quot;)</span>
<span class="fc" id="L428">                                .put(&quot;time&quot;, &quot;11:00&quot;))</span>
                ));

<span class="fc" id="L431">        JSONArray doctors = new JSONArray();</span>
<span class="fc" id="L432">        doctors.put(new JSONObject()</span>
<span class="fc" id="L433">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L434">                .put(&quot;name&quot;, &quot;Doctor 1&quot;)</span>
<span class="fc" id="L435">                .put(&quot;gender&quot;, &quot;female&quot;)</span>
<span class="fc" id="L436">                .put(&quot;specialization&quot;, &quot;General Medicine&quot;)</span>
<span class="fc" id="L437">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L438">                .put(&quot;schedule&quot;, doctor1Schedule));</span>
<span class="fc" id="L439">        Files.write(Paths.get(&quot;doctors_slots_complete.json&quot;), doctors.toString().getBytes());</span>
<span class="fc" id="L440">        String[] args = {&quot;book&quot;, TEMP_PATIENTS_FILE, &quot;doctors_slots_complete.json&quot;, &quot;P001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L441">        Bookhosp.main(args);</span>
<span class="fc" id="L442">        new File(&quot;doctors_slots_complete.json&quot;).delete();</span>
<span class="fc" id="L443">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L444">        assertTrue(consoleOutput.contains(&quot;Error: No available slots on &quot;));</span>
<span class="fc" id="L445">    }</span>

    @Test
    void testBookingNextDaySaturday() {
<span class="fc" id="L449">        LocalDate nextWorkingDay = Bookhosp.getNextWorkingDay(LocalDate.of(2024, 11, 29));</span>
<span class="fc" id="L450">        assertEquals(LocalDate.of(2024, 12, 2), nextWorkingDay);</span>
<span class="fc" id="L451">    }</span>

    @Test
    void testBookingNextDaySunday() {
<span class="fc" id="L455">        LocalDate nextWorkingDay = Bookhosp.getNextWorkingDay(LocalDate.of(2024, 11, 30));</span>
<span class="fc" id="L456">        assertEquals(LocalDate.of(2024, 12, 2), nextWorkingDay);</span>
<span class="fc" id="L457">    }</span>


    /*Display Functionality*/
    @Test
    void testDisplayInValidCommandIntroduced() {
<span class="fc" id="L463">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE};</span>
<span class="fc" id="L464">        Bookhosp.main(args);</span>
<span class="fc" id="L465">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L466">        assertTrue(consoleOutput.contains(&quot;Usage: display &lt;doctor.json&gt; &lt;ALL|GENERAL|PEDIATRICS|SURGERY|DOCTOR &lt;Doctor_ID&gt;&gt; &lt;DATE&gt;&quot;));</span>
<span class="fc" id="L467">    }</span>

    @Test
    void testDisplayInValidDoctorCommandIntroduced() {
<span class="fc" id="L471">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L472">        Bookhosp.main(args);</span>
<span class="fc" id="L473">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L474">        assertTrue(consoleOutput.contains(&quot;Usage: display &lt;doctor.json&gt; DOCTOR &lt;Doctor_ID&gt; &lt;DATE&gt;&quot;));</span>
<span class="fc" id="L475">    }</span>

    @Test
    void testHandleDisplayDOCTOR() {
<span class="fc" id="L479">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;D001&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L480">        Bookhosp.main(args);</span>
<span class="fc" id="L481">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L482">        assertTrue(consoleOutput.contains(&quot;Appointments for Doctor &quot;));</span>
<span class="fc" id="L483">    }</span>

    @Test
    void testHandleDisplayDOCTORFail() {
<span class="fc" id="L487">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;D001&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L488">        Bookhosp.main(args);</span>
<span class="fc" id="L489">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L490">        assertFalse(consoleOutput.contains(&quot;Appointments for Doctor &quot;));</span>
<span class="fc" id="L491">    }</span>

    @Test
    void testHandleDisplayDOCTORIDFail() {
<span class="fc" id="L495">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;D999&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L496">        Bookhosp.main(args);</span>
<span class="fc" id="L497">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L498">        assertTrue(consoleOutput.contains(&quot;Error: Doctor with ID &quot;));</span>
<span class="fc" id="L499">    }</span>


    //TC46
    @Test
    void testHandleDisplayAll() {
<span class="fc" id="L505">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;ALL&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L506">        Bookhosp.main(args);</span>
<span class="fc" id="L507">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L508">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L509">    }</span>

    //TC09
    @Test
    void testHandleDisplaySurgery() {
<span class="fc" id="L514">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;SURGERY&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L515">        Bookhosp.main(args);</span>
<span class="fc" id="L516">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L517">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L518">    }</span>

    @Test
    void testHandleDisplayPediatrics() {
<span class="fc" id="L522">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;PEDIATRICS&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L523">        Bookhosp.main(args);</span>
<span class="fc" id="L524">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L525">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L526">    }</span>

    @Test
    void testHandleDisplayGeneral() {
<span class="fc" id="L530">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot;GENERAL&quot;, &quot;2024-11-25&quot;};</span>
<span class="fc" id="L531">        Bookhosp.main(args);</span>
<span class="fc" id="L532">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L533">        assertTrue(consoleOutput.contains(&quot;Doctor ID:&quot;), &quot;Display executed successfully.&quot;);</span>
<span class="fc" id="L534">    }</span>

    @Test
    void testHandleDisplayFailOption() {
<span class="fc" id="L538">        String[] args = {&quot;display&quot;, TEMP_DOCTORS_FILE, &quot; &quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L539">        Bookhosp.main(args);</span>
<span class="fc" id="L540">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L541">        assertTrue(consoleOutput.contains(&quot;Invalid argument. Use 'ALL', 'GENERAL', 'PEDIATRICS', 'SURGERY', or 'DOCTOR &lt;Doctor_ID&gt;'.&quot;));</span>
<span class="fc" id="L542">    }</span>

    @Test
    void testErrorFileDisplay() {
<span class="fc" id="L546">        String[] args = {&quot;display&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;ALL&quot;, &quot;2024-11-28&quot;};</span>
<span class="fc" id="L547">        Bookhosp.main(args);</span>
<span class="fc" id="L548">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L549">        assertTrue(consoleOutput.contains(&quot;Error reading doctors file: &quot;));</span>
<span class="fc" id="L550">    }</span>

    /* Search Functionality */
    @Test
    void testSearchInValidCommandIntroduced() {
<span class="fc" id="L555">        String[] args = {&quot;search&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L556">        Bookhosp.main(args);</span>
<span class="fc" id="L557">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L558">        assertTrue(consoleOutput.contains(&quot;Usage: search &lt;patients.json&gt; &lt;PATIENT ID&gt;&quot;));</span>
<span class="fc" id="L559">    }</span>

    @Test
    void testSearchExistingPatient() {
<span class="fc" id="L563">        String[] args = {&quot;search&quot;, TEMP_PATIENTS_FILE, &quot;P001&quot;};</span>
<span class="fc" id="L564">        Bookhosp.main(args);</span>
<span class="fc" id="L565">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L566">        assertTrue(consoleOutput.contains(&quot;Appointments for Patient P001&quot;), &quot;Patient with ID 'P001' should exist.&quot;);</span>
<span class="fc" id="L567">    }</span>

    //TC10
    @Test
    void testSearchNonExistentPatient() {
<span class="fc" id="L572">        String[] args = {&quot;search&quot;, TEMP_PATIENTS_FILE, &quot;P999&quot;};</span>
<span class="fc" id="L573">        Bookhosp.main(args);</span>
<span class="fc" id="L574">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L575">        assertTrue(consoleOutput.contains(&quot;Error: Patient ID not found&quot;), &quot;Patient with ID 'P999' should not exist.&quot;);</span>
<span class="fc" id="L576">    }</span>

    @Test
    void testErrorFileSearchPatient() {
<span class="fc" id="L580">        String[] args = {&quot;search&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;P001&quot;};</span>
<span class="fc" id="L581">        Bookhosp.main(args);</span>
<span class="fc" id="L582">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L583">        assertTrue(consoleOutput.contains(&quot;Error reading patients file: &quot;));</span>
<span class="fc" id="L584">    }</span>

    /* Add Functionality */
    //TC11
    @Test
    void testAddInValidCommandIntroduced() {
<span class="fc" id="L590">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L591">        Bookhosp.main(args);</span>
<span class="fc" id="L592">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L593">        assertTrue(consoleOutput.contains(&quot;Usage: add &lt;patient.json&gt; &lt;doctor.json&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L594">    }</span>

    //TC12
    @Test
    void testAddDoctor() {
<span class="fc" id="L599">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, TEMP_DOCTORS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L600">        Bookhosp.main(args);</span>
<span class="fc" id="L601">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L602">        assertTrue(consoleOutput.contains(&quot;Doctors added successfully!&quot;));</span>
<span class="fc" id="L603">    }</span>

    //TC13
    @Test
    void testErrorWriteAddDoctor() {
<span class="fc" id="L608">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;DOCTOR&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L609">        Bookhosp.main(args);</span>
<span class="fc" id="L610">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L611">        assertTrue(consoleOutput.contains(&quot;Error reading input file: &quot;));</span>
<span class="fc" id="L612">    }</span>

    //TC14
    @Test
    void testAddPatientErrorAdmin() {
<span class="fc" id="L617">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;PATIENT&quot;, TEMP_PATIENTS_FILE, &quot;PATIENT&quot;};</span>
<span class="fc" id="L618">        Bookhosp.main(args);</span>
<span class="fc" id="L619">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L620">        assertTrue(consoleOutput.contains(&quot;Usage: add &lt;patient.json&gt; &lt;doctor.json&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L621">    }</span>

    @Test
    void testAddPatient() {
<span class="fc" id="L625">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;PATIENT&quot;, TEMP_PATIENTS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L626">        Bookhosp.main(args);</span>
<span class="fc" id="L627">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L628">        assertTrue(consoleOutput.contains(&quot;Patients added successfully!&quot;));</span>
<span class="fc" id="L629">    }</span>

    //TC15
    @Test
    void testErrorWriteAddPatient() {
<span class="fc" id="L634">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;PATIENT&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L635">        Bookhosp.main(args);</span>
<span class="fc" id="L636">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L637">        assertTrue(consoleOutput.contains(&quot;Error reading input file: &quot;));</span>
<span class="fc" id="L638">    }</span>

    //TC16
    @Test
    void testInvalidTypeAddPatient() {
<span class="fc" id="L643">        String[] args = {&quot;add&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot; &quot;, TEMP_PATIENTS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L644">        Bookhosp.main(args);</span>
<span class="fc" id="L645">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L646">        assertTrue(consoleOutput.contains(&quot;Error: Invalid type. Use DOCTOR or PATIENT.&quot;));</span>
<span class="fc" id="L647">    }</span>

    /* Delete Functionality */
    //TC17
    @Test
    void testDeleteInValidCommandIntroduced() {
<span class="fc" id="L653">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L654">        Bookhosp.main(args);</span>
<span class="fc" id="L655">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L656">        assertTrue(consoleOutput.contains(&quot;Usage: delete &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; --admin&quot;));</span>
<span class="fc" id="L657">    }</span>

    //TC18
    @Test
    void testDeleteErrorAdmin() {
<span class="fc" id="L662">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, &quot;DOCTOR&quot;};</span>
<span class="fc" id="L663">        Bookhosp.main(args);</span>
<span class="fc" id="L664">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L665">        assertTrue(consoleOutput.contains(&quot;Usage: delete &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; --admin&quot;));</span>
<span class="fc" id="L666">    }</span>

    @Test
    void testDeleteDoctor() {
<span class="fc" id="L670">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L671">        Bookhosp.main(args);</span>
<span class="fc" id="L672">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L673">        assertTrue(consoleOutput.contains(&quot;Doctor deleted successfully!&quot;));</span>
<span class="fc" id="L674">    }</span>

    //TC19
    @Test
    void testDeleteDoctorInvalid() {
<span class="fc" id="L679">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D999&quot;, &quot;DOCTOR&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L680">        Bookhosp.main(args);</span>
<span class="fc" id="L681">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L682">        assertFalse(consoleOutput.contains(&quot;Doctor deleted successfully!&quot;));</span>
<span class="fc" id="L683">    }</span>

    @Test
    void testDeletePatient() {
<span class="fc" id="L687">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L688">        Bookhosp.main(args);</span>
<span class="fc" id="L689">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L690">        assertTrue(consoleOutput.contains(&quot;Patient deleted successfully!&quot;));</span>
<span class="fc" id="L691">    }</span>

    //TC20
    @Test
    void testDeletePatientInvalid() {
<span class="fc" id="L696">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P999&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L697">        Bookhosp.main(args);</span>
<span class="fc" id="L698">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L699">        assertFalse(consoleOutput.contains(&quot;Patient deleted successfully!&quot;));</span>
<span class="fc" id="L700">    }</span>

    @Test
    void testInvalidTypeDeletePatient() {
<span class="fc" id="L704">        String[] args = {&quot;delete&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot; &quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L705">        Bookhosp.main(args);</span>
<span class="fc" id="L706">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L707">        assertTrue(consoleOutput.contains(&quot;Error: Invalid type. Use DOCTOR or PATIENT.&quot;));</span>
<span class="fc" id="L708">    }</span>

    //TC21
    @Test
    void testErrorWriteDeletePatient() {
<span class="fc" id="L713">        String[] args = {&quot;delete&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;P001&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L714">        Bookhosp.main(args);</span>
<span class="fc" id="L715">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L716">        assertTrue(consoleOutput.contains(&quot;Error deleting record: &quot;));</span>
<span class="fc" id="L717">    }</span>

    //TC22
    @Test
    void testErrorWriteDeleteDoctor() {
<span class="fc" id="L722">        String[] args = {&quot;delete&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;D001&quot;, &quot;PATIENT&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L723">        Bookhosp.main(args);</span>
<span class="fc" id="L724">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L725">        assertTrue(consoleOutput.contains(&quot;Error deleting record: &quot;));</span>
<span class="fc" id="L726">    }</span>


    /* Modify Functionality */
    //TC23
    @Test
    void testModifyInValidCommandIntroduced() {
<span class="fc" id="L733">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L734">        Bookhosp.main(args);</span>
<span class="fc" id="L735">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L736">        assertTrue(consoleOutput.contains(&quot;Usage: modify &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L737">    }</span>

    //TC24
    @Test
    void testModifyErrorAdmin() {
<span class="fc" id="L742">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, TEMP_INPUT_DOCTOR_FILE, &quot;DOCTOR&quot;};</span>
<span class="fc" id="L743">        Bookhosp.main(args);</span>
<span class="fc" id="L744">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L745">        assertTrue(consoleOutput.contains(&quot;Usage: modify &lt;patient.json&gt; &lt;doctor.json&gt; &lt;ID&gt; &lt;DOCTOR|PATIENT&gt; &lt;input_file&gt; --admin&quot;));</span>
<span class="fc" id="L746">    }</span>

    @Test
    void testModifyDoctor() {
<span class="fc" id="L750">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, TEMP_INPUT_DOCTOR_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L751">        Bookhosp.main(args);</span>
<span class="fc" id="L752">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L753">        assertTrue(consoleOutput.contains(&quot;Doctor modified successfully!&quot;));</span>
<span class="fc" id="L754">    }</span>

    //TC25
    @Test
    void testModifyDoctorInvalid() {
<span class="fc" id="L759">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D999&quot;, &quot;DOCTOR&quot;, TEMP_INPUT_DOCTOR_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L760">        Bookhosp.main(args);</span>
<span class="fc" id="L761">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L762">        assertFalse(consoleOutput.contains(&quot;Doctor modified successfully!&quot;));</span>
<span class="fc" id="L763">    }</span>

    @Test
    void testModifyPatient() {
<span class="fc" id="L767">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;PATIENT&quot;, TEMP_INPUT_PATIENT_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L768">        Bookhosp.main(args);</span>
<span class="fc" id="L769">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L770">        assertTrue(consoleOutput.contains(&quot;Patient modified successfully!&quot;));</span>
<span class="fc" id="L771">    }</span>

    //TC26
    @Test
    void testModifyPatientInvalid() {
<span class="fc" id="L776">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P999&quot;, &quot;PATIENT&quot;, TEMP_INPUT_PATIENT_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L777">        Bookhosp.main(args);</span>
<span class="fc" id="L778">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L779">        assertFalse(consoleOutput.contains(&quot;Patient modified successfully!&quot;));</span>
<span class="fc" id="L780">    }</span>

    @Test
    void testErrorWriteModifyDoctor() {
<span class="fc" id="L784">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;D001&quot;, &quot;DOCTOR&quot;, &quot;TEMP_INPUT_DOCTOR_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L785">        Bookhosp.main(args);</span>
<span class="fc" id="L786">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L787">        assertTrue(consoleOutput.contains(&quot;Error modifying record: &quot;));</span>
<span class="fc" id="L788">    }</span>

    //TC27
    @Test
    void testErrorWriteModifyPatient() {
<span class="fc" id="L793">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;PATIENT&quot;, &quot;TEMP_INPUT_PATIENT_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L794">        Bookhosp.main(args);</span>
<span class="fc" id="L795">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L796">        assertTrue(consoleOutput.contains(&quot;Error modifying record: &quot;));</span>
<span class="fc" id="L797">    }</span>

    //TC28
    @Test
    void testInvalidTypeModify() {
<span class="fc" id="L802">        String[] args = {&quot;modify&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot; &quot;, TEMP_INPUT_PATIENT_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L803">        Bookhosp.main(args);</span>
<span class="fc" id="L804">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L805">        assertTrue(consoleOutput.contains(&quot;Error: Invalid type. Use DOCTOR or PATIENT.&quot;));</span>
<span class="fc" id="L806">    }</span>


    /* Handle View Schedule Functionality */
    //TC30
    @Test
    void testVWScheduleInValidCommandIntroduced() {
<span class="fc" id="L813">        String[] args = {&quot;view-schedule&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L814">        Bookhosp.main(args);</span>
<span class="fc" id="L815">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L816">        assertTrue(consoleOutput.contains(&quot;Usage: view-schedule &lt;doctor.json&gt; &lt;Doctor ID|GENERAL|PEDIATRICS|SURGERY&gt;&quot;));</span>
<span class="fc" id="L817">    }</span>

    //TC31
    @Test
    void testVWSchedule() {
<span class="fc" id="L822">        String[] args = {&quot;view-schedule&quot;, TEMP_DOCTORS_FILE, &quot;GENERAL&quot;};</span>
<span class="fc" id="L823">        Bookhosp.main(args);</span>
<span class="fc" id="L824">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L825">        assertTrue(consoleOutput.contains(&quot;Schedule for &quot;));</span>
<span class="fc" id="L826">    }</span>

    //TC32
    @Test
    void testVWSchedule2() {
<span class="fc" id="L831">        String[] args = {&quot;view-schedule&quot;, TEMP_DOCTORS_FILE, &quot;D001&quot;};</span>
<span class="fc" id="L832">        Bookhosp.main(args);</span>
<span class="fc" id="L833">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L834">        assertTrue(consoleOutput.contains(&quot;Schedule for &quot;));</span>
<span class="fc" id="L835">    }</span>

    @Test
    void testVWScheduleFileError() {
<span class="fc" id="L839">        String[] args = {&quot;view-schedule&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L840">        Bookhosp.main(args);</span>
<span class="fc" id="L841">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L842">        assertTrue(consoleOutput.contains(&quot;Error reading doctors file: &quot;));</span>
<span class="fc" id="L843">    }</span>

    /* Cancel Functionality */
    //TC33
    @Test
    void testCancelInValidCommandIntroduced() {
<span class="fc" id="L849">        String[] args = {&quot;cancel&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L850">        Bookhosp.main(args);</span>
<span class="fc" id="L851">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L852">        assertTrue(consoleOutput.contains(&quot;Usage: cancel &lt;doctors.json&gt; &lt;APPOINTMENT ID&gt;&quot;));</span>
<span class="fc" id="L853">    }</span>

    //TC34
    @Test
    void testCancel() {
<span class="fc" id="L858">        String[] args = {&quot;cancel&quot;, TEMP_DOCTORS_FILE, &quot;A001&quot;};</span>
<span class="fc" id="L859">        Bookhosp.main(args);</span>
<span class="fc" id="L860">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L861">        assertTrue(consoleOutput.contains(&quot;cancelled&quot;));</span>
<span class="fc" id="L862">    }</span>

    //TC35
    @Test
    void testCancelErrorAppointmentID() {
<span class="fc" id="L867">        String[] args = {&quot;cancel&quot;, TEMP_DOCTORS_FILE, &quot;dere&quot;};</span>
<span class="fc" id="L868">        Bookhosp.main(args);</span>
<span class="fc" id="L869">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L870">        assertTrue(consoleOutput.contains(&quot;Error: Appointment ID not found.&quot;));</span>
<span class="fc" id="L871">    }</span>

    //TC36
    @Test
    void testCancelFileError() {
<span class="fc" id="L876">        String[] args = {&quot;cancel&quot;, &quot;file_example.json&quot;, &quot;A001&quot;};</span>
<span class="fc" id="L877">        Bookhosp.main(args);</span>
<span class="fc" id="L878">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L879">        assertTrue(consoleOutput.contains(&quot;Error handling cancellation: &quot;));</span>
<span class="fc" id="L880">    }</span>

    /* Overdue Functionality */
    //TC37
    @Test
    void testOverdueInValidCommandIntroduced() {
<span class="fc" id="L886">        String[] args = {&quot;overdue&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;--admin&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L887">        Bookhosp.main(args);</span>
<span class="fc" id="L888">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L889">        assertTrue(consoleOutput.contains(&quot;Usage: overdue &lt;patients.json&gt; --admin&quot;));</span>
<span class="fc" id="L890">    }</span>

    @Test
    void testOverdueErrorAdminIntroduced() {
<span class="fc" id="L894">        String[] args = {&quot;overdue&quot;, &quot;--admin&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L895">        Bookhosp.main(args);</span>
<span class="fc" id="L896">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L897">        assertTrue(consoleOutput.contains(&quot;Error: Unauthorized access. This command is available only to administrators.&quot;));</span>
<span class="fc" id="L898">    }</span>

    //TC38
    @Test
    void testOverdue() {
<span class="fc" id="L903">        String[] args = {&quot;overdue&quot;, TEMP_PATIENTS_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L904">        Bookhosp.main(args);</span>
<span class="fc" id="L905">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L906">        assertTrue(consoleOutput.contains(&quot;Overdue:&quot;));</span>
<span class="fc" id="L907">    }</span>

    @Test
    void testOverdueAppointmentDateAfterToday() throws IOException {
<span class="fc" id="L911">        JSONArray patient1Appointments = new JSONArray();</span>
<span class="fc" id="L912">        patient1Appointments.put(new JSONObject()</span>
<span class="fc" id="L913">                .put(&quot;appointment_id&quot;, &quot;A001&quot;)</span>
<span class="fc" id="L914">                .put(&quot;department&quot;, &quot;GENERAL&quot;)</span>
<span class="fc" id="L915">                .put(&quot;doctor_id&quot;, &quot;D001&quot;)</span>
<span class="fc" id="L916">                .put(&quot;date&quot;, &quot;2024-12-25&quot;)</span>
<span class="fc" id="L917">                .put(&quot;time&quot;, &quot;10:30&quot;)</span>
<span class="fc" id="L918">                .put(&quot;status&quot;, &quot;Scheduled&quot;)</span>
<span class="fc" id="L919">                .put(&quot;notes&quot;, &quot;Routine check-up.&quot;));</span>
<span class="fc" id="L920">        JSONArray patients = new JSONArray();</span>
<span class="fc" id="L921">        patients.put(new JSONObject()</span>
<span class="fc" id="L922">                .put(&quot;patient_id&quot;, &quot;P001&quot;)</span>
<span class="fc" id="L923">                .put(&quot;name&quot;, &quot;Patient 1&quot;)</span>
<span class="fc" id="L924">                .put(&quot;age&quot;, 35)</span>
<span class="fc" id="L925">                .put(&quot;gender&quot;, &quot;male&quot;)</span>
<span class="fc" id="L926">                .put(&quot;date_of_birth&quot;, &quot;15/01/1998&quot;)</span>
<span class="fc" id="L927">                .put(&quot;appointments&quot;, patient1Appointments));</span>
<span class="fc" id="L928">        Files.write(Paths.get(&quot;patients_overdue.json&quot;), patients.toString().getBytes());</span>

<span class="fc" id="L930">        String[] args = {&quot;overdue&quot;, &quot;patients_overdue.json&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L931">        Bookhosp.main(args);</span>
<span class="fc" id="L932">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L933">        assertFalse(consoleOutput.contains(&quot;Overdue:&quot;));</span>
<span class="fc" id="L934">    }</span>

    @Test
    void testNoOverdue() {
<span class="fc" id="L938">        String[] args = {&quot;overdue&quot;, TEMP_PATIENTS_OVERDUES_FAIL_FILE, &quot;--admin&quot;};</span>
<span class="fc" id="L939">        Bookhosp.main(args);</span>
<span class="fc" id="L940">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L941">        assertFalse(consoleOutput.contains(&quot;Overdue:&quot;));</span>
<span class="fc" id="L942">    }</span>

    //TC39
    @Test
    void testOverdueErrorFile() {
<span class="fc" id="L947">        String[] args = {&quot;overdue&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;--admin&quot;};</span>
<span class="fc" id="L948">        Bookhosp.main(args);</span>
<span class="fc" id="L949">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L950">        assertTrue(consoleOutput.contains(&quot;Error reading patients file: &quot;));</span>
<span class="fc" id="L951">    }</span>

    /* Reschedule Functionality */
    //TC40
    @Test
    void testRescheduleInValidCommandIntroduced() {
<span class="fc" id="L957">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE};</span>
<span class="fc" id="L958">        Bookhosp.main(args);</span>
<span class="fc" id="L959">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L960">        assertTrue(consoleOutput.contains(&quot;reschedule &lt;patient.json&gt; &lt;doctor.json&gt; &lt;PATIENT ID&gt; &lt;APPOINTMENT ID&gt; &lt;DEPARTMENT&gt; [Option]&quot;));</span>
<span class="fc" id="L961">    }</span>

    //TC41
    @Test
    void testReschedule() {
<span class="fc" id="L966">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A002&quot;, &quot;SURGERY&quot;};</span>
<span class="fc" id="L967">        Bookhosp.main(args);</span>
<span class="fc" id="L968">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L969">        assertTrue(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L970">    }</span>

    //TC42
    @Test
    void testRescheduleFail1() {
<span class="fc" id="L975">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A001&quot;, &quot; &quot;};</span>
<span class="fc" id="L976">        Bookhosp.main(args);</span>
<span class="fc" id="L977">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L978">        assertFalse(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L979">    }</span>

    @Test
    void testRescheduleFail2() {
<span class="fc" id="L983">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A999&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L984">        Bookhosp.main(args);</span>
<span class="fc" id="L985">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L986">        assertFalse(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L987">    }</span>

    @Test
    void testRescheduleFail3() {
<span class="fc" id="L991">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;A001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L992">        Bookhosp.main(args);</span>
<span class="fc" id="L993">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L994">        assertFalse(consoleOutput.contains(&quot;Appointment successfully rescheduled!&quot;));</span>
<span class="fc" id="L995">    }</span>

    @Test
    void testRescheduleErrorID() {
<span class="fc" id="L999">        String[] args = {&quot;reschedule&quot;, TEMP_PATIENTS_FILE, TEMP_DOCTORS_FILE, &quot;P001&quot;, &quot;02&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L1000">        Bookhosp.main(args);</span>
<span class="fc" id="L1001">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1002">        assertTrue(consoleOutput.contains(&quot;Error: Appointment ID not found.&quot;));</span>
<span class="fc" id="L1003">    }</span>

    //TC43
    @Test
    void testRescheduleErrorFile() {
<span class="fc" id="L1008">        String[] args = {&quot;reschedule&quot;, &quot;TEMP_PATIENTS_FILE&quot;, &quot;TEMP_DOCTORS_FILE&quot;, &quot;P001&quot;, &quot;A001&quot;, &quot;GENERAL&quot;};</span>
<span class="fc" id="L1009">        Bookhosp.main(args);</span>
<span class="fc" id="L1010">        String consoleOutput = outputStreamCaptor.toString().trim();</span>
<span class="fc" id="L1011">        assertTrue(consoleOutput.contains(&quot;Error handling reschedule: &quot;));</span>
<span class="fc" id="L1012">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>